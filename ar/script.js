document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".header .mega-menu"),t=document.querySelector(".header li .other");t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("active")}),document.addEventListener("click",function(n){e.contains(n.target)||t.contains(n.target)||e.classList.remove("active")}),e.querySelectorAll("a").forEach(t=>{t.addEventListener("click",function(){e.classList.remove("active")})});let n=document.querySelectorAll("[id]"),l=document.querySelectorAll(".main-nav li a"),s=document.querySelector(".header").offsetHeight,o=document.querySelector(".main-nav .dynamic-text");function a(){let e=window.scrollY;n.forEach(t=>{let n=t.offsetTop-s-20,a=t.offsetHeight,i=t.getAttribute("id");if(e>=n&&e<n+a){l.forEach(e=>e.removeAttribute("id"));let r=document.querySelector(`.main-nav li a[href="#${i}"]`);r&&(r.id="active",o&&(o.textContent=r.textContent))}})}window.addEventListener("scroll",a),a()});let skillsSection=document.querySelector("#our-skills"),spans=document.querySelectorAll(".prog span"),skillTexts=document.querySelectorAll(".skill h3 span"),skillsStarted=!1,nums=document.querySelectorAll(".info .unit span:first-child"),eventsSection=document.querySelector(".events"),numbersStarted=!1;function startCount(e){let t=parseInt(e.textContent),n=0,l=setInterval(()=>{e.textContent=n++,n>t&&clearInterval(l)},2e3/t)}window.addEventListener("scroll",function(){let e=window.scrollY,t=window.innerHeight;e>=skillsSection.offsetTop-t+200&&!skillsStarted&&(skillsStarted=!0,spans.forEach((e,t)=>{let n=parseInt(skillTexts[t].textContent);e.style.width=n+"%";let l=0,s=setInterval(()=>{l>=n?clearInterval(s):(l++,skillTexts[t].textContent=l+"%")},20)})),e>=eventsSection.offsetTop-t+200&&!numbersStarted&&(numbersStarted=!0,nums.forEach(e=>startCount(e)))}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".stats"),t=document.querySelectorAll(".num"),n=!1;window.addEventListener("scroll",function(){if(window.scrollY>=e.offsetTop-window.innerHeight/2&&!n){var l;t.forEach(e=>e.style.opacity="1");let s,o,a,i;o=(s=Math.max(...Array.from(l=t).map(e=>parseInt(e.dataset.goal))))/60,a=0,i=setInterval(()=>{a+=o,l.forEach(e=>{let t=parseInt(e.dataset.goal);e.textContent=Math.min(t,Math.floor(a/s*t)).toLocaleString()}),a>=s&&(clearInterval(i),l.forEach(e=>e.textContent=parseInt(e.dataset.goal).toLocaleString()))},33.333333333333336),n=!0}})}),document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".container"),t=document.querySelectorAll(".amount"),n=!1;window.addEventListener("scroll",function(){if(window.scrollY>=e.offsetTop-window.innerHeight/2&&!n){var l;let s,o,a,i;o=(s=Math.max(...Array.from(l=t).map(e=>parseInt(e.dataset.price))))/60,a=0,i=setInterval(()=>{a+=o,l.forEach(e=>{let t=parseInt(e.dataset.price);e.textContent=`$${Math.min(t,Math.floor(a/s*t))}`}),a>=s&&(clearInterval(i),l.forEach(e=>e.textContent=`$${parseInt(e.dataset.price)}`))},23.333333333333332),n=!0}})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("videoPreview"),t=document.querySelectorAll(".list ul li"),n=document.querySelector(".fa-random");function l(n){t.forEach(e=>e.classList.remove("active")),n.classList.add("active");let l=n.getAttribute("data-image");l&&(e.src=l)}t.forEach(e=>{e.addEventListener("click",function(){l(this)})}),n.addEventListener("click",function(){let e=document.querySelector(".list ul li.active"),n=Array.from(t).filter(t=>t!==e);n.length>0&&l(n[Math.floor(Math.random()*n.length)])})}),document.getElementById("subscribeForm").addEventListener("submit",function(e){e.preventDefault();let t=document.getElementById("email"),n=document.querySelector(".spinner"),l=document.getElementById("responseMessage2"),s=document.getElementById("successIcon");if(t.checkValidity()){n.classList.remove("hidden");let o=new FormData(this);fetch(this.action,{method:this.method,body:o}).then(e=>{e.ok?(l.textContent="✅ لقد تم الاشتراك بنجاح!",l.style.color="green",n.classList.add("hidden"),setTimeout(()=>{s.style.opacity="1"},300),setTimeout(()=>{l.textContent="",s.style.opacity="0",t.value=""},4e3)):(l.textContent="❌ حدث خطأ أثناء الإرسال!",l.style.color="red",n.classList.add("hidden"))}).catch(()=>{l.textContent="❌خطأ في اتصال الخادم!",l.style.color="red",n.classList.add("hidden")})}else l.textContent="❌يرجى إدخال عنوان بريد إلكتروني صالح!",l.style.color="red"}),document.getElementById("subscribeForm").addEventListener("submit",function(e){e.preventDefault();let t=new FormData(this),n=document.getElementById("email").value,l=document.getElementById("responseMessage2");fetch("https://formsubmit.co/ajax/59c8afab51c897189738c3be64647401",{method:"POST",body:t}).then(e=>e.json()).then(e=>{e.success?(l.style.display="block",l.style.color="green",l.innerText=`لقد قمت بالاشتراك بنجاح باستخدام بريدك الإلكتروني : ${n}`,document.getElementById("subscribeForm").reset()):(l.style.display="block",l.style.color="red",l.innerText="فشل الاشتراك، حاول مرة أخرى.")}).catch(e=>{l.style.display="block",l.style.color="red",l.innerText="حدث خطأ أثناء التسجيل، يرجى المحاولة مرة أخرى لاحقًا.",console.error("Error:",e)})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("discountForm"),t=document.getElementById("submitButton"),n=document.getElementById("formMessage");e.addEventListener("submit",function(l){l.preventDefault(),t.value="Sending...",t.disabled=!0;let s=new FormData(e);s.append("_captcha","false"),s.append("_template","table"),s.append("_subject","New Discount Request"),s.append("_cc","youssefosamatar@gmail.com"),fetch("https://formsubmit.co/ajax/youssefosamatar@gmail.com",{method:"POST",body:s}).then(e=>e.json()).then(t=>{t.success?(n.textContent="لقد تم ارسال رسالتك بنجاح!",n.style.display="block",e.reset()):(n.textContent="حدث خطأ ما. يرجى المحاولة مرة أخرى!",n.style.color="red",n.style.display="block")}).catch(e=>{n.textContent="حدث خطأ. يرجى المحاولة مرة أخرى!",n.style.color="red",n.style.display="block"}).finally(()=>{t.value="Send",t.disabled=!1})})}),document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("mobileInput"),t=document.getElementById("mobileError"),n=document.getElementById("submitButton"),l=/^(011|012|010)\d{8}$|^(10|11|12)\d{7}$/;function s(){n.classList.remove("enabled")}e.addEventListener("input",o=>{e.value=e.value.replace(/\D/g,"");let a=e.value.trim();l.test(a)?(t.style.display="none",e.style.color="#000",n.classList.add("enabled")):(t.textContent="يجب أن يتكون رقم الهاتف من 11 رقمًا (011، 012، 010) أو 10 أرقام (10، 11، 12).",t.style.display="block",e.style.color="red",s())}),e.addEventListener("blur",()=>{""===e.value.trim()&&(t.textContent="رقم الهاتف المحمول مطلوب.",t.style.display="block",e.style.color="red",s())})}),document.addEventListener("DOMContentLoaded",function(){document.getElementById("discountForm").addEventListener("submit",function(e){e.preventDefault();let t=this.querySelector("input[type='submit']"),n=document.querySelector(".spinner2"),l=document.getElementById("successIcon2");t.value="",t.disabled=!0,n.classList.add("active");let s=new FormData(this);s.append("_captcha","false"),s.append("_template","table"),s.append("_subject","New Discount Request"),fetch("https://formsubmit.co/ajax/youssefosamatar@gmail.com",{method:"POST",body:s}).then(e=>e.json()).then(e=>{e.success?(n.classList.remove("active"),setTimeout(()=>{l.classList.remove("hidden"),l.style.opacity="1"},300),setTimeout(()=>{l.style.opacity="0",l.classList.add("hidden"),t.value="إرسال",t.disabled=!1},4e3),this.reset()):(alert("❌ حدث خطأ أثناء الإرسال! حاول مرة أخرى."),n.classList.remove("active"),t.value="إرسال",t.disabled=!1)}).catch(()=>{alert("❌ تعذر الاتصال بالخادم! تأكد من اتصالك بالإنترنت."),n.classList.remove("active"),t.value="إرسال",t.disabled=!1})})});